---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Preview">
  <article
    id="preview"
    class="prose prose-invert max-w-3xl mx-auto py-12 font-besley text-base leading-relaxed"
  >
    Cargando preview…
  </article>

  <script is:inline>
    window.addEventListener("message", (event) => {
      const entry = event.data?.entry;
      if (!entry) return;

      const el = document.getElementById("preview");
      if (!el) return; // ← FIX null safe

      // ✅ API moderna Decap
      const body = entry.data?.body ?? "";

      el.innerHTML = body;
    });
  </script>
</Layout>
